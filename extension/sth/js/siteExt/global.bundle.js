var SIH=function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=0)}([function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e){e=decodeURI(e);var r=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return r&&{href:e,protocol:r[1],host:r[2],hostname:r[3],port:r[4],pathname:r[5],search:r[6],hash:r[7]}}function a(e){return new Promise(function(r){Object.keys(e).length>0?chrome.runtime.sendMessage(SIHID,{type:"GET_PRICE_FROM_STEAM",data:e},r):r()})}function s(){var e=o(window.location.href);if(e.pathname.indexOf("market/listings/")>-1){var r=e.pathname.split("/");return{appId:r[3],marketHashName:r[4],location:e}}return{}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=".";return e=e.replace(/[^0-9.,]/g,""),e.indexOf(",")>e.indexOf(".")&&(r=","),(e.match(RegExp("\\"+r,"g"))||[]).length>1&&(r=""),""!==r&&e.length-e.indexOf(r)-1==3&&0!==e.indexOf("0"+r)&&(r=""),e=e.replace(RegExp("[^0-9"+r+"]","g"),""),e=e.replace(",","."),parseFloat(e)}function c(e){return(+e.toFixed(2)).toLocaleString("ru").replace(",",".")}Object.defineProperty(r,"__esModule",{value:!0}),r.getLocation=o,r.getPriceFromSteam=a,r.getPageParams=s,r.parseNumber=i,t.d(r,"localStorageJSON",function(){return u}),t.d(r,"App",function(){return l}),r.formatNumber=c,t.d(r,"SihAppGlobal",function(){return f}),t.d(r,"SihUserPrices",function(){return g}),t.d(r,"Currency",function(){return d});var u={set:function(e,r){try{r=r||"",localStorage.setItem(e,JSON.stringify(r))}catch(e){}},get:function(e){try{var r=localStorage.getItem(e)||null;return JSON.parse(r)}catch(e){return null}}},l={getManifest:function(){return new Promise(function(e){chrome.runtime.sendMessage(SIHID,{type:"GET_MANIFEST_APP",data:{}},e)}).then(function(e){return e.data})}},f=function(){function e(){n(this,e)}return e.getLoginSihAppUser=function(){return new Promise(function(e,r){sih_app_account?chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_APP_USER_INFO"},function(r){r.success&&0!==Object.keys(r).length||chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_LOGIN_SIH_APP"},function(r){e(r)}),e(r.success&&Object.keys(r).length>0?r:{success:!1})}):e({success:!1,auth:!1})})},e.getSubscribeAds=function(){return new Promise(function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_CHECK_SUBSCRIBE_ADS"},function(r){e(r)})})},e.getSubscribeAdsPlans=function(){return new Promise(function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SUBSCRIBE_ADS_PLANS_SIH_APP"},function(r){e(r)})})},e.errorHandler=function(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Please, try again";n.toLowerCase().includes("invalid token or session is over")&&(e.text(SIHLang.subscribeAds.modal.reload_page),e.off("click").click(function(){window.location.reload()})),0===t.length?r.append('<span class="sih-modal__text sih-modal__error_message">Error! '+n+"</span>"):(t.text("Error! "+n),t.hasClass("blink")?(t.removeClass("blink"),setTimeout(function(){t.addClass("blink")},100)):t.addClass("blink")),e.removeClass("animated-background"),r.show()},e}(),g=function(){function e(){n(this,e)}return e.sendItemData=function(e,r,t,n){try{var o=JSON.parse(JSON.stringify(e)),a=JSON.parse(JSON.stringify(o.buy_order_graph)),s=JSON.parse(JSON.stringify(o.sell_order_graph));if(!r||5!==n)return!1;if(!g_steamID)return!1;if(0===s.length)return;s.length>5?s.length=5:s.length,a.length>1?a.length=1:a.length;for(var i=[],c=s.length-1;c>=0;c--){var u=s[c][0],l=0!==c?s[c][1]-s[c-1][1]:s[c][1];i.unshift({price:u,count:l})}var f=a[0][0],g=a[0][1],d={app_id:r,hash_name:t,prices:i,steamid:g_steamID};if(a.length){var m={price:f,count:g};Object.assign(d,{buy_price:m})}chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_USER_STEAM_PRICE",data:d})}catch(e){}},e}(),d=function(){function e(){n(this,e)}return e.getPriceFromCurrency=function(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=e.getCurrency(+t),a=e.getCurrency(+n),s=ExchangeRates._rates[o.strCode],i=ExchangeRates._rates[a.strCode];return"USD"===a.strCode?"USD"!=o.strCode&&(r*=s)<.03&&(r=.03):a.strCode!=o.strCode&&(r=r/i*s)<.03&&(r=.03),{price:r||0,code:o.strCode,symbol:o.strSymbol,text:(o.bSymbolIsPrefix?""+o.strSymbol+o.strSymbolAndNumberSeparator:"")+(r?r.toFixed(2):0)+(o.bSymbolIsPrefix?"":""+o.strSymbolAndNumberSeparator+o.strSymbol),template:(o.bSymbolIsPrefix?""+o.strSymbol+o.strSymbolAndNumberSeparator:"")+"$price"+(o.bSymbolIsPrefix?"":""+o.strSymbolAndNumberSeparator+o.strSymbol),symbolPosition:o.bSymbolIsPrefix?"before":"after"}},e.getCurrency=function(e){var r=null;e=e||"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1;for(var t in g_rgCurrencyData)if(g_rgCurrencyData[t].eCurrencyCode===+e){r=g_rgCurrencyData[t];break}return r},e.getCurrencyCodeSteam=function(){return"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1},e}()}]);