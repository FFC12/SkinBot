var spentmoney=webpackJsonp_name_([7],{145:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,c){try{var o=e[a](c),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=n(9),o=n(4),s={},i=function(){function t(){a(this,t)}return t.load=function(){function t(t){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e){var n,r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get({currency_rates:{}});case 2:if(n=t.sent,Object.assign(s,n.currency_rates),void 0!==e){t.next=10;break}return t.next=7,c.a.getWalletCurrency();case 7:t.t0=t.sent,t.next=11;break;case 10:t.t0=e;case 11:if(r=t.t0,s[e]&&!(Date.now()-s[e].ts>144e5)){t.next=17;break}return t.next=15,new Promise(function(t){return chrome.runtime.sendMessage({type:"GetRates",data:{base:r}},t)});case 15:a=t.sent,a.success&&(s[a.data.base]={rates:a.data.rates,ts:Date.now()},o.a.set({currency_rates:s}));case 17:case"end":return t.stop()}},t,this)}));return t}(),t.convert=function(t,e,n){return s[n]?t/s[n].rates[e]:s[e]?t*s[e].rates[n]:null},t}();e.a=i},305:function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,c){try{var o=e[a](c),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(11),i=n.n(s),u=n(23),l=n(9),p=n(144),f=n(145),d=n(4),h=n(14),v=(n(18),0),y=0,m=0,w=0,x=function(t){function e(){return a(this,e),c(this,t.apply(this,arguments))}return o(e,t),e.prototype.onLoad=function(){function t(){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get({show_spent_money:h.a.show_spent_money});case 2:e=t.sent,e.show_spent_money&&this.addInfo();case 4:case"end":return t.stop()}},t,this)}));return t}(),e.prototype.addInfo=function(){function t(){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(){var e,n,r,a,c,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i()(".account_setting_block:first .account_setting_sub_block:last").after('<div id="total_expenses" class="account_setting_sub_block">'+i18next.t("controls:loading")+"</div>"),t.next=3,l.a.getWalletCurrency();case 3:return this.userCurrency=t.sent,e=l.a.getSessionID(),t.next=7,f.a.load(this.userCurrency);case 7:n=null,r={l:"en",sessionid:e};case 9:return n&&(r.cursor=n),t.next=12,l.a.sendRequest({method:"POST",url:"//store.steampowered.com/account/AjaxLoadMoreHistory/",data:r});case 12:a=t.sent,n=this.calcSpentMoney(a);case 14:if(n){t.next=9;break}case 15:c=v+y+m+w,o="",v&&(o+='\n        <div class="accountRow accountBalance">\n          <div data-tooltip-content="Click to view purchase &amp; wallet history" class="accountData price">\n            <a href="https://store.steampowered.com/account/history/">'+p.a.vCurrencyFormat(v,this.userCurrency)+'</a>\n          </div>\n          <div class="accountLabel">'+i18next.t("controls:accountinfo.purchases")+":</div>\n        </div>"),y&&(o+='\n        <div class="accountRow accountBalance">\n          <div data-tooltip-content="Click to view purchase &amp; wallet history" class="accountData price">\n            <a href="https://store.steampowered.com/account/history/">'+p.a.vCurrencyFormat(y,this.userCurrency)+'</a>\n          </div>\n          <div class="accountLabel">'+i18next.t("controls:accountinfo.transactions")+":</div>\n        </div>"),m&&(o+='\n        <div class="accountRow accountBalance">\n          <div data-tooltip-content="Click to view purchase &amp; wallet history" class="accountData price">\n            <a href="https://store.steampowered.com/account/history/">'+p.a.vCurrencyFormat(m,this.userCurrency)+'</a>\n          </div>\n          <div class="accountLabel">'+i18next.t("controls:accountinfo.gifts")+":</div>\n        </div>"),w&&(o+='\n        <div class="accountRow accountBalance">\n          <div data-tooltip-content="Click to view purchase &amp; wallet history" class="accountData price">\n            <a href="https://store.steampowered.com/account/history/">'+p.a.vCurrencyFormat(w,this.userCurrency)+'</a>\n          </div>\n          <div class="accountLabel">'+i18next.t("controls:accountinfo.ingame")+":</div>\n        </div>"),c&&(o+='\n        <div class="inner_rule"></div>\n        <div class="accountRow accountBalance">\n          <div data-tooltip-content="Click to view purchase &amp; wallet history" class="accountData price">\n            <a href="https://store.steampowered.com/account/history/">'+p.a.vCurrencyFormat(c,this.userCurrency)+'</a>\n          </div>\n          <div class="accountLabel">'+i18next.t("controls:accountinfo.total")+":</div>\n        </div>"),i()("#total_expenses").html(o);case 23:case"end":return t.stop()}},t,this)}));return t}(),e.prototype.calcSpentMoney=function(t){var e=this,n=i.a.parseHTML(t.html);return i.a.each(n,function(t,n){var r=i()(n).find(".wht_type div:first").text().trim(),a=i()(n).find(".wht_total").text().trim(),c=i()(n).find(".wht_items").text().trim();if(a&&!a.match("Credit")&&r&&!c.match("Wallet Credit")){var o=p.a.parsePrice(a,!0);if(!o)return;var s=void 0;s=o.currencyCode!==e.userCurrency?f.a.convert(o.value,o.currencyCode,e.userCurrency):o.value,r.match(/^Purchase/)&&(v+=s),r.match("Market Transaction")&&(y+=s),r.match("Gift Purchase")&&(m+=s),r.match("In-Game Purchase")&&(w+=s)}}),t.cursor},e}(u.a);e.default=new x},610:function(t,e,n){n(3),t.exports=n(305)}},[610]);