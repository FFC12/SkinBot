var gameprice=webpackJsonp_name_([2],{145:function(e,n,r){"use strict";function t(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,r){function t(a,i){try{var o=n[a](i),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){t("next",e)},function(e){t("throw",e)});e(s)}return t("next")})}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=r(9),o=r(4),s={},c=function(){function e(){a(this,e)}return e.load=function(){function e(e){return n.apply(this,arguments)}var n=t(regeneratorRuntime.mark(function e(n){var r,t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get({currency_rates:{}});case 2:if(r=e.sent,Object.assign(s,r.currency_rates),void 0!==n){e.next=10;break}return e.next=7,i.a.getWalletCurrency();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=n;case 11:if(t=e.t0,s[n]&&!(Date.now()-s[n].ts>144e5)){e.next=17;break}return e.next=15,new Promise(function(e){return chrome.runtime.sendMessage({type:"GetRates",data:{base:t}},e)});case 15:a=e.sent,a.success&&(s[a.data.base]={rates:a.data.rates,ts:Date.now()},o.a.set({currency_rates:s}));case 17:case"end":return e.stop()}},e,this)}));return e}(),e.convert=function(e,n,r){return s[r]?e/s[r].rates[n]:s[n]?e*s[n].rates[r]:null},e}();n.a=c},296:function(e,n,r){"use strict";function t(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,r){function t(a,i){try{var o=n[a](i),s=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(s).then(function(e){t("next",e)},function(e){t("throw",e)});e(s)}return t("next")})}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function o(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var s=r(11),c=r.n(s),u=r(23),p=r(9),l=r(144),d=r(4),_=r(145),f=r(18),h=r(14),g=r(566),v=(r.n(g),r(570)),m=(r.n(v),r(569)),w=(r.n(m),r(568)),y=(r.n(w),r(567)),b=(r.n(y),r(565)),x=(r.n(b),r(559));r.n(x);window.SIHID||(window.SIHID=chrome.runtime.id||"cmeakgjggjdlcpncigglobpjbkabhmjl");var k=function(e){function n(){return a(this,n),i(this,e.apply(this,arguments))}return o(n,e),n.prototype.onLoad=function(){function e(){return r.apply(this,arguments)}var r=t(regeneratorRuntime.mark(function e(){var r,t,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new f.Localization,e.next=3,Promise.all([d.a.get({show_online_users:h.a.show_online_users,show_streamlink:h.a.show_streamlink,show_current_price:h.a.show_current_price,show_historical_price:h.a.show_historical_price,preferred_country:h.a.preferred_country,show_all_stores:h.a.show_all_stores,stores:h.a.stores,show_regional_price:h.a.show_regional_price,regional_countries:h.a.regional_countries}),r.onLoadStarter()]);case 3:return t=e.sent,a=t[0],d.a.set(a),a.show_streamlink&&n.addVideoLinks(),e.next=9,p.a.getWalletCurrency();case 9:return i=e.sent,e.next=12,_.a.load(i);case 12:if((a.show_current_price||a.show_historical_price)&&n.getPrices(a),!a.show_online_users){e.next=16;break}return e.next=16,n.addOnlineUsers();case 16:a.show_regional_price&&n.getRegionalPrice(a.regional_countries,i),n.addBanner();case 18:case"end":return e.stop()}},e,this)}));return e}(),n.addVideoLinks=function(){var e=encodeURIComponent(c()(".apphub_AppName:first").text().replace(/(\u2122)/g,"").replace(/(\xAE)/g,"")),n='\n      <div class="sih_video_links">\n        <div class="title">'+i18next.t("controls:gameinfo.checkit")+':</div>\n        <div class="links">\n          <a class="icon_link" href="https://www.youtube.com/results?search_query='+e+'" target="_blank">\n            <span class="icon-youtube"></span>\n          </a>\n          <a class="icon_link" href="https://www.twitch.tv/directory/game/'+e+'" target="_blank">\n            <span class="icon-twitch"></span>\n          </a>\n        </div>\n      </div>\n    ';c()(".game_meta_data").has("#category_block").prepend(n)},n.addOnlineUsers=function(){function e(){return n.apply(this,arguments)}var n=t(regeneratorRuntime.mark(function e(){var n,r,t,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.a.getAppId(window.location.href),e.next=3,p.a.getOnlineUsersByAppId(n);case 3:if(r=e.sent,t=r.updatedAt,null!==(a=r.count)){e.next=8;break}return e.abrupt("return");case 8:i='\n      <div class="sih_online_users">\n        <div class="online-users-count">\n          <div class="title">'+i18next.t("controls:gameinfo.online")+':</div>\n          <div class="value">'+a+'</div>\n        </div>\n        <div class="online-users-updatedat">\n          <div class="title">'+i18next.t("controls:gameinfo.updatedAt")+':</div>\n          <div class="value">'+new Date(t).toLocaleString()+"</div>\n        </div>\n      </div>\n    ",c()(".game_meta_data").has("#category_block").prepend(i);case 10:case"end":return e.stop()}},e,this)}));return e}(),n.getPrices=function(){function e(e){return r.apply(this,arguments)}var r=t(regeneratorRuntime.mark(function e(r){var t,a,i,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],c()("input[name=subid]").each(function(e,n){n.value&&t.push("sub/"+n.value)}),c()("input[name=appid]").each(function(e,n){n.value&&t.push("app/"+n.value)}),c()("input[name=bundleid]").each(function(e,n){n.value&&t.push("bundle/"+n.value)}),t.length){e.next=6;break}return e.abrupt("return");case 6:return a={cc:""!==r.preferred_country?r.preferred_country:p.a.getStoreRegionCountryCode(),app:t.join(),shops:r.show_all_stores?"":Object.keys(r.stores).filter(function(e){return r.stores[e]}).join()},e.next=9,new Promise(function(e){return chrome.runtime.sendMessage(window.SIHID,{type:"GET_SIH_PRICES",data:a},e)});case 9:i=e.sent,i.success&&(o=i[".meta"].currency,s=/(\w+)\/(\d+)/,c.a.each(i.data,function(e,t){var a=e.match(s);if(a){var i=a[1],u=a[2],d=c()("input[name="+i+"id][value="+u+"]").parent().parent();d.parent().addClass("sih_game_node"),c()(d).find(".game_purchase_action").before('\n            <div class="sih_store_prices">\n              <div class="sih_lowest_price"></div>\n              <div class="sih_current_price"></div>\n            </div>\n          ');var _=d.find(".price, .discount_final_price").text(),f=_?l.a.parsePrice(_,!0):{};if(r.show_historical_price&&!p.a.isEmpty(t.lowest)){var h="<div>"+i18next.t("controls:gameinfo.historical")+": __price__ "+i18next.t("controls:gameinfo.at")+" __shop__ "+i18next.t("controls:gameinfo.on")+" __date__ (__info__)</div>",g='<a href="'+t.urls.history+'" target="_blank">'+i18next.t("controls:gameinfo.info")+"</a>",v=l.a.vCurrencyFormat(100*t.lowest.price,o.code);c()(d).find(".sih_lowest_price").html(""+h.replace("__price__",v).replace("__shop__",t.lowest.shop).replace("__date__",new Date(1e3*t.lowest.added).toLocaleDateString()).replace("__info__",g))}if(r.show_current_price&&!p.a.isEmpty(t.current)){var m="<div>"+i18next.t("controls:gameinfo.bestprice")+": __price__ "+i18next.t("controls:gameinfo.at")+" __shop__ (__info__)</div>",w='<a href="'+t.current.url+'" class="store_link" target="_blank">'+t.current.shop+"</a>",y='<a href="'+t.urls.game+'" target="_blank">'+i18next.t("controls:gameinfo.info")+"</a>",b=n.getFinalPriceInCents(t.current.price_new,o.code,f.currencyCode),x="";if("Steam"!==t.current.shop&&f.value>b){var k=l.a.vCurrencyFormat(f.value-b,f.currencyCode);x='<div class="sih_your_savings">'+i18next.t("controls:gameinfo.savings")+": "+k+"</div>"}var I='<span class="'+(x?"sih_price profit":"sih_price")+'">'+l.a.vCurrencyFormat(100*t.current.price_new,o.code)+"</span>";c()(d).find(".sih_current_price").append(m.replace("__price__",I).replace("__shop__",w).replace("__info__",y)+"\n                "+x+"</div>")}c()(d).find(".sih_lowest_price, .sih_current_price").toArray().every(function(e){return""===c()(e).html()})&&c()(d).find(".sih_store_prices").remove()}}));case 11:case"end":return e.stop()}},e,this)}));return e}(),n.getFinalPriceInCents=function(e,n,r){return n!==r?_.a.convert(100*e,n,r):100*e},n.getRegionalPrice=function(){function e(e,n){return r.apply(this,arguments)}var r=t(regeneratorRuntime.mark(function e(r,t){var a,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],i={},c()("input[name=subid]").each(function(e,n){n.value&&a.push(n.value)}),e.next=5,Promise.all(a.map(function(e){return n.getAllRegionalGamePrices(e,r)}));case 5:o=e.sent,o.forEach(function(e){return c.a.extend(i,e)}),c.a.each(a,function(e,n){var a=c()("input[name=subid][value="+n+"]").parent().parent().parent();a.prepend('<div class="sih_regional_price" />');var o=l.a.parsePrice(a.find(".price, .discount_final_price").text());c.a.each(r,function(e,r){var s=i[n][r];if(s){var u=void 0;u=s.currency!==o.currencyCode?_.a.convert(s.final,s.currency,o.currencyCode):s.final;var p=u-o.value,d=p>0?"sih_price_higher":"sih_price_lower",f=chrome.runtime.getURL("assets/blank.gif"),h=c()('\n            <div class="sih_region" >\n              <span class="sih_flag">\n                <img src="'+f+'" class="flag flag-'+r+'" title="'+r.toUpperCase()+'">'+l.a.vCurrencyFormat(s.final,s.currency)+'\n              </span>\n              <span class="sih_regional_price_converted '+d+'">'+l.a.vCurrencyFormat(u,t)+'</span>\n              <div class="sih_regional_price_saving">\n                '+l.a.vCurrencyFormat(p,t)+'<span class="'+(p>0?"arrow_up":"arrow_down")+'"></span>\n              </div>\n            </div>\n          ');a.addClass("sih_game_node"),a.find(".sih_regional_price").append(h)}}),a.find(".sih_region").length?a.find("h1").prepend('<span class="sih_globe" />'):a.find(".sih_regional_price").remove()});case 8:case"end":return e.stop()}},e,this)}));return e}(),n.getAllRegionalGamePrices=function(){function e(e,n){return r.apply(this,arguments)}var r=t(regeneratorRuntime.mark(function e(r,t){var a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,Promise.all(t.map(function(e){return n.getGamePriceByRegion(r,e)}));case 3:return i=e.sent,i.forEach(function(e){return c.a.extend(!0,a,e)}),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}));return e}(),n.getGamePriceByRegion=function(){function e(e,r){return n.apply(this,arguments)}var n=t(regeneratorRuntime.mark(function e(n,r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.sendRequest({method:"GET",url:"//store.steampowered.com/api/packagedetails/",data:{cc:r,packageids:n}});case 2:return t=e.sent,t[n].success?(t[n][r]=t[n].data.price,delete t[n].data):t[n][r]=null,delete t[n].success,e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)}));return e}(),n.addBanner=function(){function e(){return n.apply(this,arguments)}var n=t(regeneratorRuntime.mark(function e(){var n,r,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.a.getAppId(window.location.href),e.next=3,p.a.getStoreRegionCountryCodeV2();case 3:r=e.sent,t=[],c()(".glance_tags.popular_tags a").each(function(e,n){t.push(c()(n).html().trim())}),c()("#genresAndManufacturer span a").each(function(e,n){var r=c()(n).html().trim();t.includes(r)||t.push(r)}),chrome.runtime.sendMessage(window.SIHID,{type:"GET_BANNER_LIVE",data:{appId:n,countryId:r,tags:t.join(","),time:Date.now()}},function(e){if(e.success&&e.data){var n="sih_game_banner_"+e.data.orgId+"_"+e.data.bannerId,r="sih_game_banner_"+e.data.orgId+"_"+e.data.bannerId+"_img",t='\n          <a class="sih_game_banner" href="'+e.data.link+'" id="'+n+'">\n            <img src="'+e.data.img+'" id="'+r+'">\n          </a>\n        ',a=c()(".game_meta_data").has("#category_block");a.prepend(t);var i=e.data.orgId,o=30+e.data.bannerId,s="game-page-banner-"+e.data.bannerId;a.find("#"+r).on("load",function(){chrome.runtime.sendMessage(window.SIHID,{type:"AD_HIT_STORE",data:{adLocation:s,action:"show",adId:o,partner:i}})}),a.find("#"+n).click(function(){chrome.runtime.sendMessage(window.SIHID,{type:"AD_HIT_STORE",data:{adLocation:s,action:"click",adId:o,partner:i}})})}});case 8:case"end":return e.stop()}},e,this)}));return e}(),n}(u.a);n.default=new k},559:function(e,n){},565:function(e,n,r){e.exports=r.p+"../css/fontello.css"},566:function(e,n,r){e.exports=r.p+"../font/fontello.eot"},567:function(e,n,r){e.exports=r.p+"../font/fontello.svg"},568:function(e,n,r){e.exports=r.p+"../font/fontello.ttf"},569:function(e,n,r){e.exports=r.p+"../font/fontello.woff"},570:function(e,n,r){e.exports=r.p+"../font/fontello.woff2"},601:function(e,n,r){r(3),e.exports=r(296)}},[601]);